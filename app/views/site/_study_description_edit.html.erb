<%= form_for(@study, url: update_study_settings_path, html: {class: 'update-description-form', data: {remote: true}}) do |f| %>
  <% if @study.errors.any? %>
    <div class="bs-callout bs-callout-danger">
      <h4><%= pluralize(@study.errors.count, "error") %> prohibited this study from being saved:</h4>

      <ul>
        <% @study.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div class="form-group">
    <%= f.text_area :description %>
  </div>

  <div class="form-group row">
    <div class="col-xs-12 text-center">
      <%= f.submit 'Update Description', class: 'btn btn-lg btn-success', id: 'update-study-description' %>
    </div>
  </div>

<% end %>

<script type="text/javascript" nonce="<%= content_security_policy_script_nonce %>">

    ClassicEditor
        .create( document.querySelector( '#study_description' ),
            {
                toolbar: ["heading", '|',  "bold", "italic", "link", "bulletedList", "numberedList", "blockQuote", '|', "undo", "redo"]
            }
        )
        .then( function(editor) {
            console.log(Array.from( editor.ui.componentFactory.names() ));
        } )
        .catch( function(error) {
                console.error( error );
            }
        );

    $('#update-study-description').click( function() {
        launchModalSpinner('#update-study-settings-spinner', '#update-study-settings-modal', function() {
            return true;
        });
    });
</script>