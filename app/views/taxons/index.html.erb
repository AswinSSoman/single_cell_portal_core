<h1>Registered Species</h1>

<div class="row">
  <div class="col-md-12">
    <div class="table-responsive">
      <div class="well">
        <table class="table table-striped" id="species">
          <thead>
            <tr>
              <th>Added By</th>
              <th>Common Name</th>
              <th>Scientific Name</th>
              <th>Genome Assemblies (Genome Annotations)</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <% @taxons.each do |taxon| %>
              <tr>
                <td><%= taxon.user.email %></td>
                <td><%= taxon.common_name %></td>
                <td><%= taxon.scientific_name %></td>
                <td>
                  <% taxon.genome_assemblies.each do |assembly| %>
                    <%= assembly.name %>&nbsp;
                    <% assembly.genome_annotations.each do |annotation| %>
                      <%= link_to "#{annotation.display_name} <i class='fas fa-download'></i>".html_safe, download_genome_annotation_path(id: annotation.id), class: 'btn btn-xs btn-warning' %>
                    <% end %>
                    <br />
                  <% end %>
                </td>
                <td class="actions">
                  <%= link_to "<span class='fas fa-search'></span> Details".html_safe, taxon_path(taxon), class: "btn btn-xs btn-info taxon-show" %>
                  <%= link_to "<span class='fas fa-edit'></span> Edit".html_safe, edit_taxon_path(taxon), class: "btn btn-xs btn-primary taxon-edit" %>
                  <%= link_to "<span class='fas fa-trash'></span> Delete".html_safe, taxon, method: :delete, class: "btn btn-xs btn-danger delete-btn taxon-delete", data: { confirm: 'Are you sure you want to delete this species entry?' } %>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
    <p><%= link_to "Register a new Species", new_taxon_path, class: 'btn btn-lg btn-success' %></p>
  </div>
  <script type="text/javascript" nonce="<%= content_security_policy_script_nonce %>">

      $('#species').dataTable({
          pagingType: "full_numbers",
          pageLength: 10,
          order: [[0, 'asc']],
          language: {
              search: "Filter Results By: "
          }
      });
  </script>
</div>



